env:
  global:
  - secure: PmmjZm+f8rD78FDCC3z0Phodqn4jgHie6ACV1YTDI5rLzOBnZwsQlenYo4DvshzoMiYipOCu+0b9d3pppJOSbyJK/2w7kEQw1J6KazkqOmo6Nk86biyR/EoTUc6r6JyNNhUfAWwjBJKDMLoe4e+wBFEpm/S9Ja0mHXr9ZyzdS+kU+oVeo9WI9cBOF2PUCuun2mZj6xQA3ODnFZHAX8/5Wfzosn59mSN1vFjko49RBfbRNITjErzxJAmq3ufeIr55v6gRWeHd0ICWdD3UxcjbGZ5csQQgDTB0w/yb0+mu7HcIQc8d9DG0M+gHSOcCaI6JU6uH7x1mVbMNHw33+UdVV1OmgmjKBOR8uCFEcCT/0l26MxOH8IpRhM3VOU6wDUTq2gGWwPlVDq+axsYgZG9EiS69/zXBc0yMrVqZpqoQdyYZvsUp37tfdvG7SAwhlVgw3PCYQeQ3zsUQHvrB+Cjke3gmDNX+Lj/HC5W/2nBwfbm2PicGiyuv8gBwFVD06T5iCtft3Fl0VHhf2dD5Xu1I4jzvDW+NX3ZHW8hcJuYFE0sdRXIkVi8+XrSlpHiAbPL2VlneQ9Pb0QAdg67V3fRGN7cdfSiyif+NHRMy+XDZ2ReenGsoGcTTGGARahsR3rWevTDLds/oEeLiD7QL1SPIKM+IoMpl4YSRU7K7xWPlsKY=
  - secure: LRF+1nH10qizkr3JCld/bcmykX2rvkuif8O0GzElfle/wzqqYVWlG+qpHBXWScddhtjEi81vCkmeB13FABHM10TYFWHIMlLYZ3ZTlIGLSEapNqG7MGgIZInV+LLptiNkB3uSFDf665TBbZ8UTF1YhL5GlbXbP1TT6bXTDtX8pZLaxRt/5T6aYCUM15PsdPZZrvgojpxa3RBP9Ay0A0pRb/JgNSxXyEd1VMuEHC9bF2+7l+AgF/xuK2xsI6S8oAzES0xVdUSMP5cMiPhVa9JHSCYnEpY0LGEaJ6R19+NlfrbJsRxh8oxYvacjQgFr5X2WfA7e5R9OQDmJywTNM0pkDhe68b8hPFl65ISzT3QTspAdKwy8zDkr8p5SYzmS1DS35dLdMNy4orB95bddpdL91R5E2B17ijKGiPt2Sx7Vfguo9ybAc/aaN3eHbeVOI2/b/yx2I6TlzrVT0pMIFTA5E53CsG6uxj4nCHfDmOpcJ5SS5kYfeHxsjkkvJ6RnBpq5SOnlolF3WOlo2U6EbA9hnXyjWD/LBkinMqbkEA5XnSrt/WvjIp37yWWmmq/gs9JeGCInr6jAk0zJu9rb4nfD4cP02XfDXKtDasQfLpUIeV1iSsHcDAg23nJvtdY8v2zrQH9JcGYoae2S2OUbAhOnNvmOJ+0o1AIrgbLws+9buu8=
  - secure: N0xYwB8CvWiLajuYOr6wzeFXwkwvUfarRqh1pJu57Ne2uCIc9KbEyp7EYAql1x9DgPW6+cax2SD1TjUCHbKdBgBhc/Tyik9sOyWBy4+LzhOQGr7xW8fRK/ElxK6fJJzuxtzNqbxGOTk5RNpQeZlh/cSkFkdrsR4c4EuxAJF380PzKoOWC+BAcv/19fHzjB5/0WrP29qjB5eXnHSHDb1+YMY/RbzAlRyboNs5UIlbUmjOayIj4FEN0aZ6ZtV4r1edJeJF48a763fmyOeBpe6UcvbZ3/V82RydwiLLbtN3ycl4+PdiKn9ZpOQP5QPLdRaZWvwaclmOJonz6WTPGzv9jCyi/YbUAaXEoZ6XWCGB4lI0jo8qiXqi+D6BEl8cAN6rJssDOijlTcC7Nct2iues5gqiuOa9fVt9/YxQ+cIYFsBPULt8iDbJ1ixJ63ih/ClO5GDGL1ocTmfhPSg18gJK4L6HvXMO55Eykae/TQ2xjj+LjSg0uYeb1bJIxcJPvZ+31HM36Fb36UbKCy+f31EjsYHF2Kzyp9WsUoZZft0mq/K8BKtxAZE3GL2Bet4t+TzKU8+Po4iwtXs8pacsNRAGUC6btrOf0WXwef2R874Fn3QNCQSHrOr0J++aeLtVKMHDncSxZiLKYryAawVNZw2E40bYhfkvct6Uvm63Ulyxf0M=
  - secure: gBL1m/ZqqMmTkH58eQo80+s54boGxcMFINjzTTUSC2uLFcU7QXJ8ImG7QlFK0zYamyjiZ3Fw0DQQD3k/+d1O+z6lvOKhrVvblOcV8hOE8zP/+ZpkEkP1bc+o6pcCZ0LrxPAG6XF7EeD/xyZ8xNGdcOEtjmc4BTUNJ/wWRApYb+EObnSIHpA60evoJTft4pWWYHaDnQjifXJnunk+II7ooP5wZ1Q+g47ozpmiteNbbAZ/PuprVZEco9QyiVDHoMZ3ZluaE3mJeh8ZkHKaXLokNCEjWkrTmTFtoyzLRggxmgAOinsr+RatGPAIPWkgJcmI5V6JVYTh+lrXM1I6+yEeukjCaVblCR183uQ+IDldWSX2GMsqeucPxDmRu5OiFpLzzoW2lleDJvBbIgd5MFxnN2H3A5D7FR3noAjfXfucUeJYaH3FPKAAgKuBDLgby17HsPe1pr9sWl78kDphj/BRCeHfRNWTaM4lrzxgFnqkl9nZgIJChjZwD2khLdmS+O7IR82lamyyRt6Wzm7KrQZne5NrDHmZVnLoZM2W87YGX18iGnf3vCc+rTEKjvLUe9pqa921ku1nracbHnn0eL7yBrK4uK+89Fku7sI31TcYuWyIYMc37MdaQf2d7KvRnmmz37X5AusaDwnDlKdMw1UrmdBHY80l8ZJ8aKReTTiC9lc=
  - secure: VXoXjDiz+XED5Y/bBS5ojNLNTGXGGsbkHYP9LPXR92VEddVOQkTRCA60lnAFYEoaeA5af1u9b9HtUg81BaTTGg2HUapce68TPjtc4KSvAiciHIEPdKB24AMigGiKLhEji33swX5Q67o52FDj460bIV8/U9yt3AbzItJ89xO6nNsjMgiiju0v73ye0o2/EpqoouD8K4y4XBRLYW+T2IPgnyFXn4T1Kkw7euQivrib/L4zsqEOvPdg3Bw9+6d5NwexKiBZRc2XeMUxRBG25gF83+XSVN/c7ZdBAvVz/7kZgblT3ILUKIAYQfBWHyMKozpUZ2C8uj0Se60sJXCUpL/mIb6G9YyYB2/R5iDaDRoS+Ddm6+KfTS8o1Rmje8Lo7RLaPs4y25sMOemDrG2twUHAageoWsXcVYXTp90+8tuuFn7VCH6tJzBB6wb1DaSAU3x+wZG3BtYDmIlLTI1tYFJpSDoZs5fueavoViKoVJiCUBQCbuH+Nr7H9+7AK5nUanX0REoBmjcQr7YjQl8qBcfbkxdyhI6hsdV0xLS2yUT9J0tHhdQFd/rMWDMikxLkO1PrvIi/1ROwpXaifEvKza2uDLL83CDzoeG0q99c3bnQkjDg/YWd+CYY9Ek8p+YQ5TwY7QlI0qJR3tk/Oj14KURbntZ3eCc0uQWv7pXAbqbCU/4=
  - secure: MrW+lEOBIXtqG8p7nK8r/3IRTHAy6/CIaa0KlrJwe27qvC2UzRgbSfQzCGIKlfkULWLh0S2eb6bkgCvl37srQwVk4Qson6zBXB4c9XalY5e+OTl+9faIeYUHxCFr4TYfSwDfBPX74J8IVVGay4ohdvuyT28SCRrzfSwRIpAo/qSJkRRh1gVp2YRDTr/1b/3ADhAbmT+NJsGFovsPK55bje9Yvkpb1TMj6S+HZdrFUQutpPLVoSRsS9AQL06UT9uTjjhL7u6zuIpHQ5stbUeSiHyHgpmWF6hyEYhv7qRGmN1iU+cTygOnLtoBM703g7caeZaPxZ8GUTD3FsHda/VD4hjdxvBSPmr+EKnfLr2RaM0k1aFW+jp2MoQwNgK2zR2c0wmEr/ANKfec0t02BqatsPStXpWR2U3HNxSZzOeoUccpYo+idqlEothodIS67OsQr+oDZz4qKp6nM8yXygzt458rdEHtNj0LdnBVyYV/5Lo65G0aSA3VpTeokmGMHbkP/1pDkaZIV9bPkbaV7n4NkKmL+mRruDV0JVM2lCyZGNZt1hzlvpRYezH071Pyf8EnrwMde5zcm0twZOBEmoHbayBiI1jMbUNiz4Bvkxlz7TEUvPeQ9FIeIxk17j1qNxk9Fp3Ck9lSQIliwaXcGcD2m7QQS6IbUaWGHdzdlneHg0Q=
sudo: required
language: nodejs
node_js:
  - 6
services:
  - docker
script:
  - docker-compose -f docker-compose.yml build
  - docker-compose -f docker-compose.yml pull --ignore-pull-failures
  # - docker-compose -f docker-compose.test.yml build
  # - docker-compose -f docker-compose.test.yml pull --ignore-pull-failures
  - docker-compose -f docker-compose.yml -f docker-compose.test.yml up -d sms-bot
  - docker exec -it sms-bot bash -c "/usr/src/app/test/test.sh"
after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
    ./deployment/tag_and_push_docker.sh;
    fi
